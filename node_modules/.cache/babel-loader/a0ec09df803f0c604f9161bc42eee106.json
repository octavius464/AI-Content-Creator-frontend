{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Sarosh\\\\Desktop\\\\React\\\\AI_marketer\\\\ai_marketer\\\\src\\\\components\\\\Login.js\";\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { setUserSession } from './Utils/Common';\nimport { connect } from \"react-redux\";\nimport { logIn } from \"../redux/actions/index\";\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    logIn: () => dispatch(logIn())\n  };\n}\n\nconst mapStateToProps = state => {\n  return {\n    isLoggedIn: state.isLoggedIn\n  };\n};\n\nfunction Login(props) {\n  const [loading, setLoading] = useState(null);\n  const [error, setError] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const handlePassword = e => {\n    setPassword(e.target.value);\n  };\n\n  const handleUsername = e => {\n    setUsername(e.target.value);\n  };\n\n  const handleLogin = () => {\n    setError(false);\n    setLoading(true);\n    console.log();\n    axios.post(\"/user/login\", {\n      \"email\": username,\n      \"password\": password\n    }).then(response => {\n      console.log(response.data.token);\n      setLoading(false);\n      setUserSession(response.data.token, response.data.email);\n      console.log(\"heading to home page\");\n      props.history.push(\"/\");\n      console.log(\"headed to home page\");\n      console.log(props.isLoggedIn);\n      props.logIn();\n    }).catch(err => {\n      setLoading(false);\n      console.log(err);\n\n      if (err.status === 401) {\n        setError(err.response.data.message);\n      } else {\n        setError(\"Apologies. Something went wrong. Please try again later.\");\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"Login\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 18\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 24\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, \"Username \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: handleUsername,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, \"Password \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 26\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onChange: handlePassword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  })), error && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"small\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 25\n    }\n  }, error), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 70\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 80\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"button\",\n    value: loading ? \"Loading...\" : \"Log in\",\n    onClick: handleLogin,\n    disable: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 117\n    }\n  }));\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["C:/Users/Sarosh/Desktop/React/AI_marketer/ai_marketer/src/components/Login.js"],"names":["React","useState","axios","setUserSession","connect","logIn","mapDispatchToProps","dispatch","mapStateToProps","state","isLoggedIn","Login","props","loading","setLoading","error","setError","username","setUsername","password","setPassword","handlePassword","e","target","value","handleUsername","handleLogin","console","log","post","then","response","data","token","email","history","push","catch","err","status","message","color"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport axios from 'axios';\r\nimport { setUserSession } from './Utils/Common';\r\nimport {connect} from \"react-redux\";\r\nimport {logIn} from \"../redux/actions/index\";\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n    return {\r\n        logIn: () => dispatch(logIn())\r\n    };\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return { isLoggedIn: state.isLoggedIn };\r\n}\r\n\r\nfunction Login(props) {\r\n    const [loading, setLoading] = useState(null);\r\n    const [error, setError] = useState(false);\r\n    const [username, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n\r\n    const handlePassword = e => {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    const handleUsername = e => {\r\n        setUsername(e.target.value);\r\n    }\r\n\r\n    const handleLogin = () => {\r\n        setError(false);\r\n        setLoading(true);\r\n        console.log()\r\n        axios.post(\"/user/login\",{\"email\":username, \"password\":password})\r\n        .then(response => {\r\n            console.log(response.data.token)\r\n            setLoading(false);\r\n            setUserSession(response.data.token, response.data.email);\r\n            console.log(\"heading to home page\");\r\n            props.history.push(\"/\");\r\n            console.log(\"headed to home page\");\r\n            console.log(props.isLoggedIn);\r\n            props.logIn();\r\n        })\r\n        .catch(err => {\r\n            setLoading(false);\r\n            console.log(err);\r\n            if (err.status === 401){\r\n                setError(err.response.data.message);\r\n            }else{\r\n                setError(\"Apologies. Something went wrong. Please try again later.\")\r\n            }\r\n        })\r\n    \r\n    }\r\n\r\n    return (\r\n        <div>\r\n            Login<br /><br />\r\n            <div>\r\n                Username <br />\r\n                <input type=\"text\" onChange={handleUsername} />\r\n            </div>\r\n            <div>\r\n                Password <br />\r\n                <input type=\"password\" onChange={handlePassword} />\r\n            </div>\r\n            {error && <><small style={{color: \"red\"}}>{error}</small><br /></>}<br />\r\n            <input type=\"button\" value={loading ? \"Loading...\" : \"Log in\"} onClick={handleLogin} disable={loading}/><br />\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(Login);"]},"metadata":{},"sourceType":"module"}